(window.MIP=window.MIP||[]).push({name:"mip-vd-tabs",func:function(){define("mip-vd-tabs/tab",[],function(){function t(t,n,r,o,a){var s=0;if(t<n);else if(t>=o-n)s=r.parent().offset().width;else s=r.offset().left-r.parent().offset().left-r.width();if(!i)if(a)e(r.parent().parent().scrollLeft(),s,r.parent().parent());else r.parent().parent().scrollLeft(s)}function e(t,e,n){var r=(e-t)/8;i=setInterval(function(){var t=n.scrollLeft();if(r>0&&t>=e||0==r)r=0,clearInterval(i);else if(r<0&&t<=e)r=0,clearInterval(i);n.scrollLeft(t+r)},30),setTimeout(function(){clearInterval(i),n.scrollLeft(e),i=null},270)}var i,n=function(){},r=function(t){var e=this,i=$(e.panel);this.toggle=i.find("."+e.toggleClass),this.view=i.find("."+e.viewClass),this.wrapper=i.find("."+e.navWrapperClass),this.navs=this.wrapper.find("."+e.navClass),this.conts=i.find("."+e.contClass),this.sum=this.navs.length,this.tabScroll=void 0,c.call(this),this.allowScroll&&this.view.length&&a.call(this),this.toggleMore&&this.allowScroll&&this.view.length&&s.call(this)},o=function(t){var e=this;if(t.children().eq(0).wrap('<div class="mip-vd-tabs-scroll-touch"></div>'),t.children().eq(1).hasClass(e.toggleClass))t.find("."+e.navWrapperClass).append('<div class="mip-vd-tabs-nav-toggle-holder"></div>');return t},a=function(){var e=this;if(e.tabScroll=o.call(e,e.view),e.current>0&&e.current<e.sum){t(Math.min(e.current+1,e.sum-1),1,e.navs.eq(e.current),e.navs.length,!1)}if("function"==typeof e.onTabScrollEnd)e.tabScroll.on("scrollEnd",function(){if(!this.customFlag||!this.customFlag.autoScroll)e.onTabScrollEnd.call(e,this)})},s=function(){function t(){r.empty(),n.hide(),i.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),i.toggleState=0}function e(){r.html(i.navs.clone()),n.append(r),i.view.after(n.show()),i.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(-1)"}),i.toggleState=1}var i=this,n=$('<div class="'+i.layerClass+'"><p>'+i.toggleLabel+"</p></div>"),r=$('<ul class="'+i.layerUlClass+'"></ul>');i.toggleState=0,r.on("click","."+i.navClass,function(){var e=$(this);i.navs.eq(e.attr("data-tid")).trigger("click"),t()}),i.toggle.on("click",function(){if(0==i.toggleState)e();else t()})},c=function(){var e=this;$.each(e.navs,function(i,r){var o=$(r);if(o.hasClass(e.currentClass))e.current=i;o.addClass(e.logClass),o.attr("data-tid",i),o.on("click",function(){var i=parseInt($(this).attr("data-tid"));if(i!==e.current){if(e.last=e.current,e.current=i,e.hideTab(e.last),e.showTab(e.current),e.onResetChange==n)e.hideContent(e.last),e.showContent(e.current),e.onChange.call(e,e.current,e.conts[e.current]);else e.onResetChange.call(e,e.current);if(e.tabScroll)t(e.current+1,1,o,e.navs.length,!0)}})}),$.each(e.conts,function(t,i){if(t==e.current)e.showTab(t),e.showContent(t);else e.hideTab(t),e.hideContent(t)})},l=function(t,e){e=e||{},this.panel=t,this.current=e.current||0,this.currentClass=e.currentClass||"c-tabs-nav-selected",this.navWrapperClass=e.navWrapperClass||"c-tabs-nav",this.navClass=e.navClass||"c-tabs-nav-li",this.contClass=e.contClass||"c-tabs-content",this.viewClass=e.viewClass||"c-tabs-nav-view",this.toggleClass=e.toggleClass||"c-tabs-nav-toggle",this.layerClass=e.layerClass||"c-tabs-nav-layer",this.layerUlClass=e.layerUlClass||"c-tabs-nav-layer-ul",this.allowScroll=e.allowScroll||!1,this.toggleMore=e.toggleMore||!1,this.toggleLabel=e.toggleLabel||"请选择",this.logClass=e.logClass||"WA_LOG_TAB",this.scrollSize=e.scrollSize||"-40",this.navs=[],this.seps=[],this.conts=[],this.sum=0,this.last=null,this.onChange=e.onChange||n,this.onResetChange=e.onResetChange||n,this.onTabScrollEnd=e.onTabScrollEnd,t&&r.call(this,e)};return $.extend(l.prototype,{showContent:function(t){if(this.conts[t])$(this.conts[t]).show()},hideContent:function(t){var e=this.conts[t];if(e)$(e).hide()},showTab:function(t){var e=this,i=e.navs;e.seps;$(i[t]).addClass(e.currentClass)},hideTab:function(t){var e=this,i=e.navs;e.seps;$(i[t]).removeClass(e.currentClass)}}),l}),define("mip-vd-tabs/mip-vd-tabs",["require","zepto","customElement","./tab"],function(t){function e(){var t=this.element,e=a(t),i=t.getAttribute(m),n=!!t.hasAttribute(u),r=!!t.hasAttribute(h),o=parseInt(t.getAttribute(f),0)||0,s=null;if(e.addClass(g),"bottom"===i)s=a(t.children.item(t.children.length-1));else s=a(t.children.item(0));if(s.detach(),s.children().each(function(t,e){var i=a(e);if(o===t)i.addClass(v);i.addClass(y)}),n){if(s.addClass(x).append(a('<div class="'+w+'"></div>').append(s.children())),r)s.append('<div class="mip-vd-tabs-nav-toggle"><img src='+p+"></div>")}else s.addClass("mip-vd-tabs-row-tile").append(a('<div class="'+w+'"></div>').append(s.children()));if(e.children().addClass(b).css("display","none").eq(o).css("display","block"),"bottom"===i)e.append(s);else e.prepend(s);new c(e,{allowScroll:n,current:parseInt(e.attr(f),10)||1,toggleMore:r,toggleLabel:e.attr("toggle-label")||"请选择",currentClass:v,navWrapperClass:w,viewClass:x,contClass:b,navClass:y,logClass:"mip-vd-tabs-log",toggleClass:A,layerClass:"mip-vd-tabs-nav-layer",layerUlClass:"mip-vd-tabs-nav-layer-ul"})}function i(t){for(var e=a(this.element),i=parseInt(e.attr("page-size"),10)||d,n=parseInt(e.attr(f),10)||1,r=parseInt(e.attr("total"),10)||1,o=Math.ceil(r/i),s=Math.floor((n-1)/i),l=[],p=0;p<o;p++){var u=i*p+1,h=Math.min(r,i*(p+1));l.push({from:u,to:h,text:u+(u<h?" - "+h:"")})}var m=a('<div class="'+g+'"></div>');if(m.append(l.map(function(e,i){for(var r='<div class="'+b+' mip-vd-tabs-episode-content" '+(i===s?"":'style="display:none;" ')+" >",o=e.from;o<=e.to;o++){r=r+'<span class="mip-vd-tabs-episode-item '+(o===n?"mip-vd-tabs-episode-item-selected":"")+'"'+(t?' href="'+t.replace(E,o)+'"':"")+">"+o+"</span>"}return r+="</div>"}).join("")),o>1){var S="",T=4;if(o>T)S='<div class="'+x+'">';if(S+='<ul class="'+w+" "+k+' mip-vd-tabs-episode-bottom-nav">',S+=l.map(function(t,e){return'<li class="'+y+" "+(e===s?v:"")+'">'+t.text+"</li>"}).join(""),S+="</ul>",o>T)S+="</div>";m.append(S),new c(m,{allowScroll:o>T,current:Math.floor((n-1)/i)||1,currentClass:v,navWrapperClass:w,viewClass:x,contClass:b,navClass:y,logClass:"mip-vd-tabs-log",toggleClass:A})}return m}function n(){var t=a(this.element),e=null;if(t.addClass(g),(parseInt(t.attr("total"),10)||1)>4)e=a('<div class="'+x+'"><ul class="'+w+'"></ul></div>');else e=a('<div class="mip-vd-tabs-row-tile"><ul class="'+w+'"></ul></div>');return e}function r(t){var e=a(this.element);if((parseInt(e.attr("total"),10)||1)<=4)return t;else return t.append('<div class="'+A+'"><img src='+p+"></div>"),t}function o(t,e,n,r,o,s){for(var d=a(this.element),p=parseInt(e,10),h=parseInt(n,10)||1,f=r||"第{x}集",m="",g=Math.max(1,h-l),b=Math.min(p,h+l);g<=b;g++)m=m+'<a class="'+y+" "+(g===h?v:"")+'" '+(o?' href="'+o.replace(E,g)+'"':"")+">"+f.replace(E,""+g)+"</a>";t.find("."+w).append(m),d.empty().append(t);var k=new c(d,{allowScroll:!!d.get(0).hasAttribute(u),toggleMore:!1,current:h||1,currentClass:v,navWrapperClass:w,viewClass:x,navClass:y,logClass:"mip-vd-tabs-log",toggleClass:A,toggleLabel:d.attr("toggle-label")||"请选择"});!function(t){function e(){c.empty(),s.hide(),l.hide(),d.find(".mip-vd-tabs-nav-toggle,.mip-vd-tabs-scroll-touch").css({position:"",top:""}),d.find(".mip-vd-tabs-nav-layer").css({position:"","border-top":"",top:""}),r.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(1)"}),r.toggleState=0}function n(){c.html(i.call(t,o)),s.append(c),d.append(l.show()),r.view.after(s.show()),d.find(".mip-vd-tabs-scroll-touch,.mip-vd-tabs-nav-toggle").css({position:"fixed",top:"1px"}),d.find(".mip-vd-tabs-nav-layer").css({position:"fixed","border-top":"1px solid #ccc",top:"0"}),r.toggle.css({"-webkit-transform":"scaleY(1)",transform:"scaleY(-1)"}),r.toggleState=1}var r=k,s=a('<div class="mip-vd-tabs-nav-layer"><p>'+r.toggleLabel+"</p></div>"),c=a('<ul class="mip-vd-tabs-nav-layer-ul"></ul>'),l=a('<div class="mip-vd-tabs-mask"></div>');r.toggleState=0,c.on("click",".mip-vd-tabs-episode-item ",function(){e()}),l.on("click",function(){e()}).on("touchmove",function(t){t.preventDefault()}),r.toggle.on("click",function(){if(0==r.toggleState)n();else e()})}(this),d.delegate("."+y+", .mip-vd-tabs-episode-item","click",function(t){t.preventDefault();var e=a(this).attr("href");if(e){var i=a(this).text();if(!i)i=a(this).find("."+y).text();var n={event:"loadiframe",data:{url:e,title:s||i,click:d.data("click")}};if(window.parent!==window)window.parent.postMessage(n,"*");else location.href=e}})}var a=t("zepto"),s=t("customElement").create(),c=t("./tab"),l=25,d=50,p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAQCAMAAAA/D5+aAAAAUVBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmbIinYlAAAAGnRSTlMABKqP+IFs7+fStaZaSjsuGBAK3tzGw3gkIaqv3YsAAABmSURBVBjTddE5FoMwEMBQGcy+Q1bd/6Cp8xir/aWARKn3FFjdAK2O5020gVp9HjexStCowx4JtOr1iQTmrP0WCSxZuzUSWDvNSySw9ZrnSOD7UNtIYB/UUOB4lQTOsSSQpqp84U9+ascIWXpxA/QAAAAASUVORK5CYII=",u="allow-scroll",h="toggle-more",f="current",m="type",g="mip-vd-tabs",b="mip-vd-tabs-content",v="mip-vd-tabs-nav-selected",y="mip-vd-tabs-nav-li",w="mip-vd-tabs-nav",x="mip-vd-tabs-nav-view",A="mip-vd-tabs-nav-toggle",k="mip-vd-tabs-nav-bottom",E=/\{\{\w}}/g;return s.prototype.build=function(){var t=this.element;switch(t.getAttribute(m)){case"episode":var i=n.call(this);if(t.hasAttribute(h))i=r.call(this,i);o.call(this,i,t.getAttribute("total"),t.getAttribute(f),t.getAttribute("text-tpl"),t.getAttribute("link-tpl"),t.getAttribute("head-title"));break;case"bottom":default:e.call(this,i)}},s}),define("mip-vd-tabs",["mip-vd-tabs/mip-vd-tabs"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-vd-tabs",e,"mip-vd-tabs.mip-vd-tabs{position:relative}mip-vd-tabs .mip-vd-tabs-nav{display:-webkit-box;display:-webkit-flex;height:44px;font-size:14px;white-space:nowrap;background-color:#fff;-webkit-align-content:flex-start;-webkit-align-items:stretch;-webkit-box-align:stretch;-webkit-box-direction:normal;-webkit-box-lines:single;-webkit-box-orient:horizontal;-webkit-box-pack:justify;-webkit-flex-direction:row;-webkit-flex-wrap:nowrap;-webkit-justify-content:space-between;padding:0 16px}mip-vd-tabs .mip-vd-tabs-nav *{-webkit-box-sizing:border-box;box-sizing:border-box}mip-vd-tabs .mip-vd-tabs-nav-li{display:block;overflow:hidden;width:16.66666667%;height:44px;padding:0 14px 0 15px;line-height:44px;text-align:center;white-space:nowrap;text-decoration:none;text-overflow:ellipsis;list-style:none;color:#333;-webkit-box-flex:1;-webkit-flex:1 1 auto}mip-vd-tabs .mip-vd-tabs-nav .mip-vd-tabs-nav-selected{border-bottom:1px solid #38f;color:#38f}mip-vd-tabs .mip-vd-tabs-nav-bottom{border-top:1px solid #eee;background:#f8f8f8}mip-vd-tabs .mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-li{color:#666}mip-vd-tabs .mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-icon{display:none}mip-vd-tabs .mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-li.mip-vd-tabs-nav-selected{position:relative;top:-1px;height:38px;border:1px solid #f1f1f1;border-color:#fff #f1f1f1 #38f #f1f1f1;line-height:38px;color:#333;background-color:#fff}mip-vd-tabs .mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-selected:first-child{margin-left:-1px}mip-vd-tabs .mip-vd-tabs-nav-bottom .mip-vd-tabs-nav-selected .mip-vd-tabs-nav-icon{display:inline-block}mip-vd-tabs .mip-vd-tabs-nav-view{position:relative;overflow:hidden;height:44px;text-align:left;background-color:#fff}mip-vd-tabs .mip-vd-tabs-nav-view .mip-vd-tabs-nav{display:inline-block;position:relative}mip-vd-tabs .mip-vd-tabs-nav-view .mip-vd-tabs-nav .mip-vd-tabs-nav-li{display:inline-block;vertical-align:middle;width:auto;padding:0 15px}mip-vd-tabs .mip-vd-tabs-nav-view .mip-vd-tabs-nav.mip-vd-tabs-nav-bottom{background-color:#f8f8f8;position:relative;display:inline-block;vertical-align:middle}mip-vd-tabs .mip-vd-tabs-nav-layer{position:absolute;z-index:8;top:0;width:100%;border-bottom:1px solid #e7e7e7;background-color:#fff}mip-vd-tabs .mip-vd-tabs-nav-layer p{height:44px;padding:0 16px;border-bottom:1px solid #eee;line-height:44px;text-align:left;color:#333}mip-vd-tabs .mip-vd-tabs-nav-layer-ul .mip-vd-tabs-nav-li{display:inline-block;width:16.66666667%;padding:0}mip-vd-tabs .mip-vd-tabs-nav-layer-ul .mip-vd-tabs-nav-selected{color:#38f}mip-vd-tabs .mip-vd-tabs-nav-toggle{position:absolute;z-index:9;top:0;right:0;display:block;width:42px;height:26px;margin:9px 0;border-left:1px solid #ccc;text-align:center;background-color:#fff}mip-vd-tabs .mip-vd-tabs-nav-toggle img{position:absolute;top:50%;left:50%;display:inline-block;width:10px;height:6px;margin:-3px 0 0 -5px}mip-vd-tabs .mip-vd-tabs-nav-toggle-holder{display:inline-block;width:29px;height:1px;visibility:hidden}mip-vd-tabs .mip-vd-tabs-scroll-touch{position:relative;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:30px;margin-top:-30px;-webkit-transform:translateY(30px);transform:translateY(30px);width:1px;min-width:100%}mip-vd-tabs .mip-vd-tabs-episode-content{padding:15px 16px;text-align:left}mip-vd-tabs .mip-vd-tabs-episode-item{display:inline-block;width:20%;height:40px;line-height:40px;text-align:center}mip-vd-tabs .mip-vd-tabs-episode-item-selected{color:#38f}mip-vd-tabs .mip-vd-tabs-episode-bottom-nav{padding:0;height:38px}mip-vd-tabs .mip-vd-tabs-episode-bottom-nav .mip-vd-tabs-nav-li{height:38px;line-height:38px}mip-vd-tabs .mip-vd-tabs-nav-view>.mip-vd-tabs-scroll-touch>.mip-vd-tabs-episode-bottom-nav.mip-vd-tabs-nav>.mip-vd-tabs-nav-li{display:inline-block}mip-vd-tabs .mip-vd-tabs-episode-bottom-nav.mip-vd-tabs-nav .mip-vd-tabs-nav-li{display:block}mip-vd-tabs .mip-vd-tabs-row-tile{width:100%;position:relative;overflow:hidden}mip-vd-tabs .mip-vd-tabs-mask{position:fixed;top:0;left:0;height:100%;width:100%;background:rgba(0,0,0,0.4)}mip-vd-tabs.mip-vd-tabs[toggle-more]{z-index:10}")}if(window.MIP)require(["mip-vd-tabs"],function(e){t(window.MIP,e)});else require(["mip","mip-vd-tabs"],t)}()}});